{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Market Making RL (MMRL)","text":"<p>Welcome to the MMRL docs. This site covers:</p> <ul> <li>Quickstart and install</li> <li>Architecture and components</li> <li>CLI and API usage</li> <li>Experiments and analysis</li> <li>Configuration schema</li> </ul>"},{"location":"#quickstart","title":"Quickstart","text":"<pre><code>pip install -r requirements.txt\nmmrl backtest\nmmrl evaluate\n</code></pre>"},{"location":"#demo","title":"Demo","text":""},{"location":"#benchmarks","title":"Benchmarks","text":""},{"location":"#cli","title":"CLI","text":"<pre><code>mmrl --help\nmmrl config-validate\nmmrl config-schema\nmmrl fetch-data --exchange binance --symbol BTC/USDT --limit 1000 --out data/btc.parquet\n</code></pre>"},{"location":"#api","title":"API","text":"<pre><code>docker compose up -d redis worker api mlflow\ncurl http://localhost:8000/health\ncurl http://localhost:8000/config/schema\n</code></pre> <p>See also: performance_metrics.md</p>"},{"location":"performance_metrics/","title":"Performance Metrics Guide","text":"<p>This guide explains the comprehensive performance metrics available in MMRL for analyzing market making strategies.</p>"},{"location":"performance_metrics/#overview","title":"Overview","text":"<p>MMRL provides industry-standard performance metrics that traders, researchers, and risk managers use to evaluate trading strategies. These metrics help you understand:</p> <ul> <li>Return Performance: How much money your strategy makes</li> <li>Risk Metrics: How much risk your strategy takes</li> <li>Risk-Adjusted Returns: How efficiently your strategy generates returns relative to risk</li> <li>Trading Statistics: How often your strategy wins vs. loses</li> <li>Distribution Characteristics: The shape and behavior of your returns</li> </ul>"},{"location":"performance_metrics/#quick-start","title":"Quick Start","text":"<pre><code>from utils.metrics import calculate_all_metrics, print_metrics_summary\n\n# Calculate all metrics for your strategy returns\nmetrics = calculate_all_metrics(\n    returns=your_returns_array,\n    risk_free_rate=0.02,  # 2% annual risk-free rate\n    periods_per_year=252   # Daily data\n)\n\n# Print a formatted summary\nprint_metrics_summary(metrics)\n</code></pre>"},{"location":"performance_metrics/#core-metrics","title":"Core Metrics","text":""},{"location":"performance_metrics/#1-return-metrics","title":"1. Return Metrics","text":""},{"location":"performance_metrics/#total-return","title":"Total Return","text":"<ul> <li>What it is: The total percentage gain/loss over the entire period</li> <li>Formula: <code>(Final_Value / Initial_Value) - 1</code></li> <li>Interpretation: Simple measure of absolute performance</li> <li>Example: 15.5% means your strategy grew by 15.5% over the period</li> </ul>"},{"location":"performance_metrics/#annualized-return","title":"Annualized Return","text":"<ul> <li>What it is: The compound annual growth rate</li> <li>Formula: <code>(1 + Total_Return)^(Periods_Per_Year / Total_Periods) - 1</code></li> <li>Interpretation: Standardized return measure for comparison across different time periods</li> <li>Example: 12.3% means your strategy grows at 12.3% per year on average</li> </ul>"},{"location":"performance_metrics/#2-risk-metrics","title":"2. Risk Metrics","text":""},{"location":"performance_metrics/#volatility-standard-deviation","title":"Volatility (Standard Deviation)","text":"<ul> <li>What it is: Annualized standard deviation of returns</li> <li>Formula: <code>Std_Dev(Returns) \u00d7 \u221a(Periods_Per_Year)</code></li> <li>Interpretation: Higher volatility = more uncertainty and potential for large losses</li> <li>Example: 25% means returns typically vary by \u00b125% annually</li> </ul>"},{"location":"performance_metrics/#maximum-drawdown","title":"Maximum Drawdown","text":"<ul> <li>What it is: Largest peak-to-trough decline in portfolio value</li> <li>Formula: <code>(Current_Value - Peak_Value) / Peak_Value</code></li> <li>Interpretation: Measures the worst historical loss and recovery time needed</li> <li>Example: -18.5% means the strategy lost 18.5% from its peak at some point</li> </ul>"},{"location":"performance_metrics/#maximum-drawdown-duration","title":"Maximum Drawdown Duration","text":"<ul> <li>What it is: How long the strategy took to recover from maximum drawdown</li> <li>Interpretation: Longer duration = more time spent underwater</li> <li>Example: 45 periods means it took 45 periods to recover from the worst loss</li> </ul>"},{"location":"performance_metrics/#3-risk-adjusted-return-metrics","title":"3. Risk-Adjusted Return Metrics","text":""},{"location":"performance_metrics/#sharpe-ratio","title":"Sharpe Ratio","text":"<ul> <li>What it is: Excess return per unit of total risk</li> <li>Formula: <code>(Return - Risk_Free_Rate) / Volatility</code></li> <li>Interpretation: Higher is better; &gt;1 is good, &gt;2 is very good</li> <li>Example: 1.25 means you earn 1.25% excess return per 1% of volatility</li> </ul>"},{"location":"performance_metrics/#sortino-ratio","title":"Sortino Ratio","text":"<ul> <li>What it is: Excess return per unit of downside risk</li> <li>Formula: <code>(Return - Risk_Free_Rate) / Downside_Deviation</code></li> <li>Interpretation: Similar to Sharpe but only penalizes downside volatility</li> <li>Example: 1.8 means you earn 1.8% excess return per 1% of downside risk</li> </ul>"},{"location":"performance_metrics/#calmar-ratio","title":"Calmar Ratio","text":"<ul> <li>What it is: Annualized return divided by maximum drawdown</li> <li>Formula: <code>Annualized_Return / |Max_Drawdown|</code></li> <li>Interpretation: Higher is better; measures return relative to worst loss</li> <li>Example: 0.8 means annual return is 80% of the maximum drawdown</li> </ul>"},{"location":"performance_metrics/#4-trading-performance-metrics","title":"4. Trading Performance Metrics","text":""},{"location":"performance_metrics/#hit-rate-win-rate","title":"Hit Rate (Win Rate)","text":"<ul> <li>What it is: Percentage of periods with positive returns</li> <li>Formula: <code>Positive_Periods / Total_Periods</code></li> <li>Interpretation: Higher is generally better, but not always (depends on risk/reward)</li> <li>Example: 65% means the strategy wins in 65% of periods</li> </ul>"},{"location":"performance_metrics/#profit-factor","title":"Profit Factor","text":"<ul> <li>What it is: Ratio of gross profits to gross losses</li> <li>Formula: <code>Sum(Positive_Returns) / |Sum(Negative_Returns)|</code></li> <li>Interpretation: &gt;1 means profitable, &gt;2 is very good</li> <li>Example: 1.8 means gross profits are 1.8x gross losses</li> </ul>"},{"location":"performance_metrics/#5-risk-management-metrics","title":"5. Risk Management Metrics","text":""},{"location":"performance_metrics/#value-at-risk-var","title":"Value at Risk (VaR)","text":"<ul> <li>What it is: Maximum expected loss at a given confidence level</li> <li>Formula: Percentile of return distribution</li> <li>Interpretation: Lower (more negative) means higher risk</li> <li>Example: -2.5% means 95% of the time, you won't lose more than 2.5% in a period</li> </ul>"},{"location":"performance_metrics/#conditional-value-at-risk-cvar","title":"Conditional Value at Risk (CVaR)","text":"<ul> <li>What it is: Average loss when VaR threshold is exceeded</li> <li>Formula: Mean of returns below VaR threshold</li> <li>Interpretation: More conservative than VaR; considers tail risk</li> <li>Example: -3.2% means when you exceed VaR, you lose 3.2% on average</li> </ul>"},{"location":"performance_metrics/#6-distribution-metrics","title":"6. Distribution Metrics","text":""},{"location":"performance_metrics/#skewness","title":"Skewness","text":"<ul> <li>What it is: Measure of return distribution asymmetry</li> <li>Interpretation: </li> <li>Positive: More positive outliers (good surprises)</li> <li>Negative: More negative outliers (bad surprises)</li> <li>Zero: Symmetric distribution</li> <li>Example: -0.5 means slightly more negative surprises than positive</li> </ul>"},{"location":"performance_metrics/#kurtosis","title":"Kurtosis","text":"<ul> <li>What it is: Measure of \"fat tails\" in return distribution</li> <li>Interpretation: </li> <li>High: More extreme events than normal distribution</li> <li>Low: Fewer extreme events</li> <li>Normal distribution has kurtosis \u2248 0</li> <li>Example: 4.2 means more extreme events than a normal distribution</li> </ul>"},{"location":"performance_metrics/#advanced-usage","title":"Advanced Usage","text":""},{"location":"performance_metrics/#rolling-metrics","title":"Rolling Metrics","text":"<p>Calculate metrics over rolling windows to see how performance changes over time:</p> <pre><code>from utils.metrics import calculate_rolling_metrics\n\n# Calculate 60-day rolling metrics\nrolling_metrics = calculate_rolling_metrics(\n    returns=your_returns,\n    window=60,  # 60-day window\n    periods_per_year=252\n)\n\n# Plot rolling Sharpe ratio\nimport matplotlib.pyplot as plt\nplt.plot(rolling_metrics.index, rolling_metrics['rolling_sharpe'])\nplt.title('Rolling Sharpe Ratio (60-day window)')\nplt.show()\n</code></pre>"},{"location":"performance_metrics/#custom-risk-free-rates","title":"Custom Risk-Free Rates","text":"<p>Adjust the risk-free rate based on your market and time period:</p> <pre><code># For US markets (Treasury rates)\nmetrics = calculate_all_metrics(\n    returns=returns,\n    risk_free_rate=0.05,  # 5% annual rate\n    periods_per_year=252\n)\n\n# For different time frequencies\nmonthly_metrics = calculate_all_metrics(\n    returns=monthly_returns,\n    risk_free_rate=0.05,\n    periods_per_year=12  # Monthly data\n)\n</code></pre>"},{"location":"performance_metrics/#strategy-comparison","title":"Strategy Comparison","text":"<p>Compare multiple strategies side by side:</p> <pre><code>strategies = {\n    \"Conservative\": conservative_returns,\n    \"Balanced\": balanced_returns,\n    \"Aggressive\": aggressive_returns\n}\n\ncomparison_data = []\nfor name, returns in strategies.items():\n    metrics = calculate_all_metrics(returns)\n    comparison_data.append({\n        'Strategy': name,\n        'Sharpe': f\"{metrics['sharpe_ratio']:.2f}\",\n        'Max DD': f\"{metrics['max_drawdown']:.2%}\",\n        'Hit Rate': f\"{metrics['hit_rate']:.2%}\"\n    })\n\ncomparison_df = pd.DataFrame(comparison_data)\nprint(comparison_df)\n</code></pre>"},{"location":"performance_metrics/#best-practices","title":"Best Practices","text":""},{"location":"performance_metrics/#1-use-multiple-metrics","title":"1. Use Multiple Metrics","text":"<p>Don't rely on a single metric. Consider: - Return: Total and annualized returns - Risk: Volatility and maximum drawdown - Risk-Adjusted: Sharpe, Sortino, and Calmar ratios - Risk Management: VaR and CVaR - Trading: Hit rate and profit factor</p>"},{"location":"performance_metrics/#2-consider-time-periods","title":"2. Consider Time Periods","text":"<ul> <li>Short-term: Focus on volatility and drawdown</li> <li>Long-term: Emphasize annualized returns and risk-adjusted metrics</li> <li>Rolling metrics: Show how performance evolves over time</li> </ul>"},{"location":"performance_metrics/#3-benchmark-against-market","title":"3. Benchmark Against Market","text":"<p>Compare your strategy to: - Risk-free rate (Treasury bills) - Market index (S&amp;P 500, Russell 2000) - Peer strategies or funds</p>"},{"location":"performance_metrics/#4-understand-limitations","title":"4. Understand Limitations","text":"<ul> <li>Historical metrics don't guarantee future performance</li> <li>Out-of-sample testing is crucial for validation</li> <li>Market conditions change, affecting metric stability</li> </ul>"},{"location":"performance_metrics/#example-analysis","title":"Example Analysis","text":"<p>Here's a complete example analyzing a market making strategy:</p> <pre><code>from utils.metrics import calculate_all_metrics, print_metrics_summary\nimport numpy as np\n\n# Simulate strategy returns (replace with your actual data)\nnp.random.seed(42)\nreturns = np.random.normal(0.0008, 0.015, 1000)  # Daily returns\n\n# Calculate comprehensive metrics\nmetrics = calculate_all_metrics(\n    returns=returns,\n    risk_free_rate=0.03,  # 3% annual risk-free rate\n    periods_per_year=252   # Daily data\n)\n\n# Print summary\nprint_metrics_summary(metrics)\n\n# Key insights\nif metrics['sharpe_ratio'] &gt; 1.0:\n    print(\"\u2713 Good risk-adjusted returns\")\nelse:\n    print(\"\u26a0 Risk-adjusted returns could be improved\")\n\nif metrics['max_drawdown'] &gt; -0.20:\n    print(\"\u2713 Reasonable drawdown levels\")\nelse:\n    print(\"\u26a0 High drawdown risk\")\n\nif metrics['profit_factor'] &gt; 1.5:\n    print(\"\u2713 Strong profit generation\")\nelse:\n    print(\"\u26a0 Profit generation could be improved\")\n</code></pre>"},{"location":"performance_metrics/#integration-with-mmrl","title":"Integration with MMRL","text":"<p>These metrics integrate seamlessly with MMRL's other components:</p> <ul> <li>Environment Results: Use metrics to evaluate simulation outcomes</li> <li>Agent Comparison: Compare different market making strategies</li> <li>Hyperparameter Tuning: Optimize strategies based on metrics</li> <li>Risk Management: Set limits based on VaR and drawdown metrics</li> <li>Reporting: Generate professional performance reports</li> </ul>"},{"location":"performance_metrics/#next-steps","title":"Next Steps","text":"<ol> <li>Run the example: Execute <code>examples/performance_analysis.py</code></li> <li>Test your strategies: Apply metrics to your own backtest results</li> <li>Customize metrics: Modify or extend metrics for your specific needs</li> <li>Visualize results: Create custom charts and dashboards</li> <li>Automate analysis: Integrate metrics into your testing pipeline</li> </ol> <p>For more advanced usage, see the API documentation and explore the source code in <code>utils/metrics.py</code>. </p>"}]}